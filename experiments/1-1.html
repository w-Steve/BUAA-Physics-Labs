<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®éªŒ 1-1: ç¨³æ€æ³•æµ‹é‡ä¸è‰¯å¯¼ä½“çƒ­å¯¼ç‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 24px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 12px;
        }
        
        .section {
            margin-bottom: 28px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            background-color: #fafafa;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 16px;
            color: #2c3e50;
            display: flex;
            align-items: center;
        }
        
        .section-content {
            background-color: white;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        .input-group {
            margin-bottom: 16px;
        }
        
        .input-row {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 12px;
        }
        
        .input-item {
            flex: 1;
            min-width: 200px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
        }
        
        .input-field {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .input-field:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .data-table {
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .table-title {
            font-weight: bold;
            margin-bottom: 12px;
            color: #2c3e50;
        }
        
        .table-header, .table-row {
            display: flex;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .header-cell, .cell {
            flex: 1;
            padding: 10px 8px;
            text-align: center;
            font-weight: 500;
        }
        
        .header-cell {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        
        .cell-input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            font-size: 14px;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 140px;
        }
        
        .btn-calculate {
            background-color: #3498db;
            color: white;
        }
        
        .btn-calculate:hover {
            background-color: #2980b9;
        }
        
        .btn-calculate:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .btn-save {
            background-color: #2ecc71;
            color: white;
        }
        
        .btn-save:hover {
            background-color: #27ae60;
        }
        
        .results-group {
            background-color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .result-item.highlight {
            font-weight: bold;
            font-size: 18px;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
        }
        
        .result-label {
            font-weight: 500;
        }
        
        .result-value {
            font-weight: bold;
            color: #3498db;
        }
        
        .intermediate-results, .uncertainty-details {
            background-color: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }
        
        .result-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 16px;
            color: #2c3e50;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 8px;
        }
        
        .uncertainty-group {
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px dashed #e0e0e0;
        }
        
        .group-title {
            font-weight: bold;
            margin-bottom: 12px;
            color: #2c3e50;
            font-size: 16px;
        }
        
        .data-status {
            background-color: white;
            padding: 16px;
            border-radius: 8px;
        }
        
        .status-item {
            display: block;
            margin-bottom: 8px;
            padding: 8px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 16px;
            }
            
            .input-row {
                flex-direction: column;
                gap: 12px;
            }
            
            .input-item {
                min-width: 100%;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="page-title">ç¨³æ€æ³•æµ‹é‡ä¸è‰¯å¯¼ä½“çƒ­å¯¼ç‡</div>
        <div style="text-align:center; margin-bottom: 20px;">ä½œè€…ï¼šğŸ²</div>
        <div class="experiment-content">
            <!-- å®éªŒç®€ä»‹ -->
            <div class="section">
                <div class="section-title">ğŸ“ ä½¿ç”¨å¿…è¯»</div>
                <div class="section-content">
                    <p style="margin-top: 10px; color: #e74c3c;">Î¸â‚å’ŒÎ¸â‚‚åˆ†åˆ«æ˜¯ç¨³æ€æ—¶åŠ çƒ­ç›˜å’Œæ•£çƒ­ç›˜çš„æ¸©åº¦ã€‚</p>
                    <p style="margin-top: 10px; color: #e74c3c;">ä¸‹æ–¹Î”tå’ŒÎ”Î¸åˆ†åˆ«æ˜¯ç”»å›¾æ³•æ‰¾åˆ‡çº¿æ—¶åˆ‡çº¿ä¸Šé€‰å–çš„ä¸¤ä¸ªç‚¹çš„xã€yåæ ‡å·®ã€‚</p>
                    <p style="margin-top: 10px; color: #e74c3c;">u(Î¸â‚-Î¸â‚‚)ä»ªå™¨è¯¯å·®æ˜¯ä½ ä½œå›¾çš„æœ€å°æ ¼å­ä»£è¡¨å¤šå°‘æ‘„æ°åº¦ã€‚</p>
                </div>
            </div>

            <!-- åŸå§‹æ•°æ®è¾“å…¥ -->
            <div class="section">
                <div class="section-title">ğŸ“Š åŸå§‹æ•°æ®è®°å½•</div>
                
                <!-- æ¸¸æ ‡å¡å°ºé›¶ç‚¹ -->
                <div class="input-group">
                    <div class="input-item">
                        <label class="input-label">æ¸¸æ ‡å¡å°ºé›¶ç‚¹ xâ‚€ (mm):</label>
                        <input 
                            class="input-field" 
                            type="number" 
                            placeholder="0.00" 
                            id="x0"
                            step="0.01"
                        />
                    </div>
                </div>

                <!-- æ•£çƒ­ç›˜Pæµ‹é‡æ•°æ® -->
                <div class="data-table">
                    <div class="table-title">æ•£çƒ­ç›˜Pæµ‹é‡æ•°æ® (5æ¬¡æµ‹é‡)</div>
                    <div class="table-header">
                        <div class="header-cell">æµ‹é‡æ¬¡æ•°</div>
                        <div class="header-cell">è´¨é‡ m_p (g)</div>
                        <div class="header-cell">é«˜åº¦ h_p (mm)</div>
                        <div class="header-cell">ç›´å¾„ d_p (mm)</div>
                    </div>
                    <div id="pMeasurementsContainer">
                        <!-- åŠ¨æ€ç”Ÿæˆæµ‹é‡è¡Œ -->
                    </div>
                </div>

                <!-- æ ·å“Bæµ‹é‡æ•°æ® -->
                <div class="data-table">
                    <div class="table-title">æ ·å“Bæµ‹é‡æ•°æ® (5æ¬¡æµ‹é‡)</div>
                    <div class="table-header">
                        <div class="header-cell">æµ‹é‡æ¬¡æ•°</div>
                        <div class="header-cell">é«˜åº¦ h_b (mm)</div>
                        <div class="header-cell">ç›´å¾„ d_b (mm)</div>
                    </div>
                    <div id="bMeasurementsContainer">
                        <!-- åŠ¨æ€ç”Ÿæˆæµ‹é‡è¡Œ -->
                    </div>
                </div>

                <!-- ç¨³æ€æ•°æ® -->
                <div class="input-group">
                    <div class="input-row">
                        <div class="input-item">
                            <label class="input-label">æ¸©åº¦ Î¸â‚ (Â°C):</label>
                            <input class="input-field" type="number" placeholder="0.00" id="theta1" step="0.01" />
                        </div>
                        <div class="input-item">
                            <label class="input-label">æ¸©åº¦ Î¸â‚‚ (Â°C):</label>
                            <input class="input-field" type="number" placeholder="0.00" id="theta2" step="0.01" />
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-item">
                            <label class="input-label">æ¸©åº¦å˜åŒ– Î”Î¸ (Â°C):</label>
                            <input class="input-field" type="number" placeholder="0.00" id="deltaTheta" step="0.01" />
                        </div>
                        <div class="input-item">
                            <label class="input-label">æ—¶é—´å˜åŒ– Î”t (s):</label>
                            <input class="input-field" type="number" placeholder="0.00" id="deltaT" step="0.01" />
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-item">
                            <label class="input-label">u(Î¸â‚-Î¸â‚‚)ä»ªå™¨è¯¯å·® (Â°C):</label>
                            <input class="input-field" type="number" placeholder="0.10" id="uThetaDiff" step="0.01" value="0.10" />
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="action-buttons">
                <button class="btn-calculate" id="calculateBtn">ğŸ§® å¼€å§‹è®¡ç®—</button>
                <button class="btn-save" id="saveBtn">ğŸ’¾ ä¿å­˜æ•°æ®</button>
            </div>
            
            <!-- è®¡ç®—ç»“æœ -->
            <div class="section" id="resultsSection" style="display: none;">
                <div class="section-title">ğŸ§® è®¡ç®—ç»“æœ</div>
                
                <div class="results-group">
                    <div class="result-item highlight">
                        <div class="result-label">çƒ­å¯¼ç‡ K:</div>
                        <div class="result-value" id="kValue">0.000 W/(mÂ·K)</div>
                    </div>
                    <div class="result-item highlight">
                        <div class="result-label">ä¸ç¡®å®šåº¦ u(K):</div>
                        <div class="result-value" id="uKValue">0.000 W/(mÂ·K)</div>
                    </div>
                    <div class="result-item highlight">
                        <div class="result-label">ç›¸å¯¹ä¸ç¡®å®šåº¦ u(K)/K:</div>
                        <div class="result-value" id="relativeUncertainty">0.000</div>
                    </div>
                </div>

                <!-- ä¸­é—´è®¡ç®—ç»“æœ -->
                <div class="intermediate-results">
                    <div class="result-title">ä¸­é—´è®¡ç®—ç»“æœ</div>
                    <div class="result-item">
                        <div class="result-label">å¹³å‡è´¨é‡ mÌ„_p:</div>
                        <div class="result-value" id="avgMass">0.000 Â± 0.000 g</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">å¹³å‡é«˜åº¦ hÌ„_p:</div>
                        <div class="result-value" id="avgHeightP">0.000 Â± 0.000 mm</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">å¹³å‡ç›´å¾„ dÌ„_p:</div>
                        <div class="result-value" id="avgDiameterP">0.000 Â± 0.000 mm</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">å¹³å‡é«˜åº¦ hÌ„_b:</div>
                        <div class="result-value" id="avgHeightB">0.000 Â± 0.000 mm</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">å¹³å‡ç›´å¾„ dÌ„_b:</div>
                        <div class="result-value" id="avgDiameterB">0.000 Â± 0.000 mm</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">é™æ¸©é€Ÿç‡ dÎ¸/dt:</div>
                        <div class="result-value" id="dthetaDtCalculated">0.000 Â°C/s</div>
                    </div>
                </div>

                <!-- ä¸ç¡®å®šåº¦åˆ†é‡è¯¦æƒ… -->
                <div class="uncertainty-details">
                    <div class="result-title">ä¸ç¡®å®šåº¦åˆ†é‡åˆ†æ</div>
                    
                    <!-- è´¨é‡ä¸ç¡®å®šåº¦ -->
                    <div class="uncertainty-group">
                        <div class="group-title">è´¨é‡ m_p</div>
                        <div class="result-item">
                            <div class="result-label">Aç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uMassA">0.000 g</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uMassB">0.000 g</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">åˆæˆä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uMassTotal">0.000 g</div>
                        </div>
                    </div>

                    <!-- æ•£çƒ­ç›˜å‡ ä½•å‚æ•°ä¸ç¡®å®šåº¦ -->
                    <div class="uncertainty-group">
                        <div class="group-title">æ•£çƒ­ç›˜å‡ ä½•å‚æ•°</div>
                        <div class="result-item">
                            <div class="result-label">h_p Aç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uHeightPA">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">h_p Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uHeightPB">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">h_p åˆæˆä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uHeightPTotal">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">d_p Aç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDiameterPA">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">d_p Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDiameterPB">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">d_p åˆæˆä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDiameterPTotal">0.000 mm</div>
                        </div>
                    </div>

                    <!-- æ ·å“Bå‡ ä½•å‚æ•°ä¸ç¡®å®šåº¦ -->
                    <div class="uncertainty-group">
                        <div class="group-title">æ ·å“Bå‡ ä½•å‚æ•°</div>
                        <div class="result-item">
                            <div class="result-label">h_b Aç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uHeightBA">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">h_b Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uHeightBB">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">h_b åˆæˆä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uHeightBTotal">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">d_b Aç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDiameterBA">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">d_b Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDiameterBB">0.000 mm</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">d_b åˆæˆä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDiameterBTotal">0.000 mm</div>
                        </div>
                    </div>

                    <!-- æ¸©åº¦ç›¸å…³ä¸ç¡®å®šåº¦ -->
                    <div class="uncertainty-group">
                        <div class="group-title">æ¸©åº¦ç›¸å…³å‚æ•°</div>
                        <div class="result-item">
                            <div class="result-label">Î”Î¸ Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDeltaThetaB">0.000 Â°C</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">Î”t Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uDeltaTB">0.000 s</div>
                        </div>
                        <div class="result-item">
                            <div class="result-label">(Î¸â‚-Î¸â‚‚) Bç±»ä¸ç¡®å®šåº¦:</div>
                            <div class="result-value" id="uThetaDiffValue">0.000 Â°C</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®çŠ¶æ€ -->
            <div class="section">
                <div class="section-title">ğŸ’¾ æ•°æ®çŠ¶æ€</div>
                <div class="data-status">
                    <div class="status-item">æœ€åæ›´æ–°: <span id="lastUpdate">æš‚æ— æ•°æ®</span></div>
                </div>
                <div style="margin-top: 15px; font-size: 12px; color: #7f8c8d; text-align: center;">
                    ä¸ä¿è¯è®¡ç®—ç»“æœçš„ç»å¯¹å‡†ç¡®æ€§ï¼Œç”¨æˆ·åº”è‡ªè¡Œæ ¸å¯¹é‡è¦æ•°æ®çš„è®¡ç®—ç»“æœï¼Œå¼€å‘è€…ä¸å¯¹å› ä½¿ç”¨æœ¬è½¯ä»¶é€ æˆçš„ä»»ä½•æŸå¤±è´Ÿè´£
                </div>
            </div>
        </div>
    </div>

    <script>
        // å®éªŒæ•°æ®æ¨¡å‹
        const experimentData = {
            experimentId: '1-1',
            // åŸºæœ¬å‚æ•°
            x0: '0.00',
            theta1: '',
            theta2: '',
            deltaTheta: '',
            deltaT: '',
            dthetaDtCalculated: '0.000',
            uThetaDiff: '0.10',
            // æµ‹é‡æ•°æ®
            pMeasurements: [],
            bMeasurements: [],
            // è®¡ç®—ç»“æœ
            showResults: false,
            kValue: '0.000',
            uKValue: '0.000',
            relativeUncertainty: '0.000',
            // ä¸­é—´ç»“æœ
            avgMass: '0.000',
            avgHeightP: '0.000',
            avgDiameterP: '0.000',
            avgHeightB: '0.000',
            avgDiameterB: '0.000',
            // ä¸ç¡®å®šåº¦åˆ†é‡
            uMassA: '0.000',
            uMassB: '0.000',
            uMassTotal: '0.000',
            uHeightPA: '0.000',
            uHeightPB: '0.000',
            uHeightPTotal: '0.000',
            uDiameterPA: '0.000',
            uDiameterPB: '0.000',
            uDiameterPTotal: '0.000',
            uHeightBA: '0.000',
            uHeightBB: '0.000',
            uHeightBTotal: '0.000',
            uDiameterBA: '0.000',
            uDiameterBB: '0.000',
            uDiameterBTotal: '0.000',
            uDeltaThetaB: '0.000',
            uDeltaTB: '0.000',
            uThetaDiffValue: '0.000',
            // çŠ¶æ€
            lastUpdate: ''
        };

        // DOM å…ƒç´ 
        const elements = {
            x0: document.getElementById('x0'),
            theta1: document.getElementById('theta1'),
            theta2: document.getElementById('theta2'),
            deltaTheta: document.getElementById('deltaTheta'),
            deltaT: document.getElementById('deltaT'),
            uThetaDiff: document.getElementById('uThetaDiff'),
            pMeasurementsContainer: document.getElementById('pMeasurementsContainer'),
            bMeasurementsContainer: document.getElementById('bMeasurementsContainer'),
            calculateBtn: document.getElementById('calculateBtn'),
            saveBtn: document.getElementById('saveBtn'),
            resultsSection: document.getElementById('resultsSection'),
            kValue: document.getElementById('kValue'),
            uKValue: document.getElementById('uKValue'),
            relativeUncertainty: document.getElementById('relativeUncertainty'),
            avgMass: document.getElementById('avgMass'),
            avgHeightP: document.getElementById('avgHeightP'),
            avgDiameterP: document.getElementById('avgDiameterP'),
            avgHeightB: document.getElementById('avgHeightB'),
            avgDiameterB: document.getElementById('avgDiameterB'),
            dthetaDtCalculated: document.getElementById('dthetaDtCalculated'),
            uMassA: document.getElementById('uMassA'),
            uMassB: document.getElementById('uMassB'),
            uMassTotal: document.getElementById('uMassTotal'),
            uHeightPA: document.getElementById('uHeightPA'),
            uHeightPB: document.getElementById('uHeightPB'),
            uHeightPTotal: document.getElementById('uHeightPTotal'),
            uDiameterPA: document.getElementById('uDiameterPA'),
            uDiameterPB: document.getElementById('uDiameterPB'),
            uDiameterPTotal: document.getElementById('uDiameterPTotal'),
            uHeightBA: document.getElementById('uHeightBA'),
            uHeightBB: document.getElementById('uHeightBB'),
            uHeightBTotal: document.getElementById('uHeightBTotal'),
            uDiameterBA: document.getElementById('uDiameterBA'),
            uDiameterBB: document.getElementById('uDiameterBB'),
            uDiameterBTotal: document.getElementById('uDiameterBTotal'),
            uDeltaThetaB: document.getElementById('uDeltaThetaB'),
            uDeltaTB: document.getElementById('uDeltaTB'),
            uThetaDiffValue: document.getElementById('uThetaDiffValue'),
            lastUpdate: document.getElementById('lastUpdate')
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initMeasurementTables();
            loadExperimentData();
            setupEventListeners();
        });

        // åˆå§‹åŒ–æµ‹é‡è¡¨æ ¼
        function initMeasurementTables() {
            // åˆå§‹åŒ–æ•£çƒ­ç›˜Pæµ‹é‡è¡¨æ ¼
            for (let i = 0; i < 5; i++) {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div class="cell">${i + 1}</div>
                    <input class="cell-input" type="number" placeholder="è´¨é‡" data-index="${i}" data-type="mass" step="0.001" />
                    <input class="cell-input" type="number" placeholder="é«˜åº¦" data-index="${i}" data-type="height" step="0.01" />
                    <input class="cell-input" type="number" placeholder="ç›´å¾„" data-index="${i}" data-type="diameter" step="0.01" />
                `;
                elements.pMeasurementsContainer.appendChild(row);
            }

            // åˆå§‹åŒ–æ ·å“Bæµ‹é‡è¡¨æ ¼
            for (let i = 0; i < 5; i++) {
                const row = document.createElement('div');
                row.className = 'table-row';
                row.innerHTML = `
                    <div class="cell">${i + 1}</div>
                    <input class="cell-input" type="number" placeholder="é«˜åº¦" data-index="${i}" data-type="height" step="0.01" />
                    <input class="cell-input" type="number" placeholder="ç›´å¾„" data-index="${i}" data-type="diameter" step="0.01" />
                `;
                elements.bMeasurementsContainer.appendChild(row);
            }
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // åŸºæœ¬å‚æ•°è¾“å…¥
            elements.x0.addEventListener('input', onX0Change);
            elements.theta1.addEventListener('input', onTheta1Change);
            elements.theta2.addEventListener('input', onTheta2Change);
            elements.deltaTheta.addEventListener('input', onDeltaThetaChange);
            elements.deltaT.addEventListener('input', onDeltaTChange);
            elements.uThetaDiff.addEventListener('input', onUThetaDiffChange);

            // æµ‹é‡æ•°æ®è¾“å…¥
            elements.pMeasurementsContainer.addEventListener('input', onPMeasurementChange);
            elements.bMeasurementsContainer.addEventListener('input', onBMeasurementChange);

            // æŒ‰é’®äº‹ä»¶
            elements.calculateBtn.addEventListener('click', calculateResults);
            elements.saveBtn.addEventListener('click', saveData);
        }

        // è¾“å…¥å¤„ç†å‡½æ•°
        function onX0Change(e) {
            experimentData.x0 = e.target.value;
            updateCalculateStatus();
        }

        function onTheta1Change(e) {
            experimentData.theta1 = e.target.value;
            updateCalculateStatus();
        }

        function onTheta2Change(e) {
            experimentData.theta2 = e.target.value;
            updateCalculateStatus();
        }

        function onDeltaThetaChange(e) {
            experimentData.deltaTheta = e.target.value;
            calculateDthetaDt();
            updateCalculateStatus();
        }

        function onDeltaTChange(e) {
            experimentData.deltaT = e.target.value;
            calculateDthetaDt();
            updateCalculateStatus();
        }

        function onUThetaDiffChange(e) {
            experimentData.uThetaDiff = e.target.value;
            updateCalculateStatus();
        }

        function onPMeasurementChange(e) {
            const index = parseInt(e.target.dataset.index);
            const type = e.target.dataset.type;
            const value = e.target.value;

            if (!experimentData.pMeasurements[index]) {
                experimentData.pMeasurements[index] = {};
            }
            experimentData.pMeasurements[index][type] = value;
            experimentData.showResults = false;
            updateCalculateStatus();
        }

        function onBMeasurementChange(e) {
            const index = parseInt(e.target.dataset.index);
            const type = e.target.dataset.type;
            const value = e.target.value;

            if (!experimentData.bMeasurements[index]) {
                experimentData.bMeasurements[index] = {};
            }
            experimentData.bMeasurements[index][type] = value;
            experimentData.showResults = false;
            updateCalculateStatus();
        }

        // è®¡ç®—é™æ¸©é€Ÿç‡ dÎ¸/dt = Î”Î¸ / Î”t
        function calculateDthetaDt() {
            const deltaTheta = parseFloat(experimentData.deltaTheta);
            const deltaT = parseFloat(experimentData.deltaT);
            
            if (!isNaN(deltaTheta) && !isNaN(deltaT) && deltaT !== 0) {
                const dthetaDt = deltaTheta / deltaT;
                experimentData.dthetaDtCalculated = dthetaDt.toFixed(6);
                elements.dthetaDtCalculated.textContent = `${experimentData.dthetaDtCalculated} Â°C/s`;
            } else {
                experimentData.dthetaDtCalculated = '0.000';
                elements.dthetaDtCalculated.textContent = '0.000 Â°C/s';
            }
        }

        // æ›´æ–°è®¡ç®—æŒ‰é’®çŠ¶æ€
        function updateCalculateStatus() {
            const hasSteadyData = experimentData.theta1 && experimentData.theta2 && 
                                 experimentData.deltaTheta && experimentData.deltaT && 
                                 experimentData.uThetaDiff;
            
            const hasPData = experimentData.pMeasurements.some(item => 
                item && item.mass && item.height && item.diameter
            );
            const hasBData = experimentData.bMeasurements.some(item => 
                item && item.height && item.diameter
            );
            
            const canCalculate = hasSteadyData && hasPData && hasBData;
            
            elements.calculateBtn.disabled = !canCalculate;
        }

        // è®¡ç®—åŠŸèƒ½
        function calculateResults() {
            try {
                // è®¡ç®—å¹³å‡å€¼ï¼ˆè€ƒè™‘é›¶ç‚¹ä¿®æ­£ï¼‰
                const averages = calculateAverages();
                
                // è®¡ç®—çƒ­å¯¼ç‡K
                const k = calculateThermalConductivity(averages);
                
                // è®¡ç®—ä¸ç¡®å®šåº¦u(K)å’Œæ‰€æœ‰åˆ†é‡
                const uncertaintyResult = calculateUncertainty(averages, k);
                
                // æ›´æ–°UIæ˜¾ç¤ºç»“æœ
                experimentData.kValue = k.toFixed(6);
                experimentData.uKValue = uncertaintyResult.uK.toFixed(6);
                experimentData.relativeUncertainty = uncertaintyResult.relativeUncertainty.toFixed(6);
                
                // å¹³å‡å€¼
                experimentData.avgMass = averages.avgMass.toFixed(5);
                experimentData.avgHeightP = averages.avgHeightP.toFixed(5);
                experimentData.avgDiameterP = averages.avgDiameterP.toFixed(5);
                experimentData.avgHeightB = averages.avgHeightB.toFixed(5);
                experimentData.avgDiameterB = averages.avgDiameterB.toFixed(5);
                
                // ä¸ç¡®å®šåº¦åˆ†é‡ - è¿™é‡Œç¡®ä¿æ­£ç¡®èµ‹å€¼
                experimentData.uMassA = uncertaintyResult.uMassA.toFixed(5);
                experimentData.uMassB = uncertaintyResult.uMassB.toFixed(5);
                experimentData.uMassTotal = uncertaintyResult.uMassTotal.toFixed(5);
                experimentData.uHeightPA = uncertaintyResult.uHeightPA.toFixed(5);
                experimentData.uHeightPB = uncertaintyResult.uHeightPB.toFixed(5);
                experimentData.uHeightPTotal = uncertaintyResult.uHeightPTotal.toFixed(5);
                experimentData.uDiameterPA = uncertaintyResult.uDiameterPA.toFixed(5);
                experimentData.uDiameterPB = uncertaintyResult.uDiameterPB.toFixed(5);
                experimentData.uDiameterPTotal = uncertaintyResult.uDiameterPTotal.toFixed(5);
                experimentData.uHeightBA = uncertaintyResult.uHeightBA.toFixed(5);
                experimentData.uHeightBB = uncertaintyResult.uHeightBB.toFixed(5);
                experimentData.uHeightBTotal = uncertaintyResult.uHeightBTotal.toFixed(5);
                experimentData.uDiameterBA = uncertaintyResult.uDiameterBA.toFixed(5);
                experimentData.uDiameterBB = uncertaintyResult.uDiameterBB.toFixed(5);
                experimentData.uDiameterBTotal = uncertaintyResult.uDiameterBTotal.toFixed(5);
                
                // æ¸©åº¦ç›¸å…³ä¸ç¡®å®šåº¦ - ç¡®ä¿æ­£ç¡®èµ‹å€¼
                experimentData.uDeltaThetaB = uncertaintyResult.uDeltaThetaB.toFixed(5);
                experimentData.uDeltaTB = uncertaintyResult.uDeltaTB.toFixed(5);
                experimentData.uThetaDiffValue = uncertaintyResult.uThetaDiffValue.toFixed(5);
                
                // æ˜¾ç¤ºç»“æœ
                displayResults();
                
                alert('è®¡ç®—å®Œæˆï¼');
            } catch (error) {
                console.error('è®¡ç®—é”™è¯¯:', error);
                alert('è®¡ç®—å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®');
            }
        }

        // è®¡ç®—å¹³å‡å€¼ï¼ˆè€ƒè™‘é›¶ç‚¹ä¿®æ­£ï¼‰
        function calculateAverages() {
            const x0 = parseFloat(experimentData.x0) || 0;
            
            // è®¡ç®—æ•£çƒ­ç›˜Pçš„å¹³å‡å€¼ï¼ˆé«˜åº¦å’Œç›´å¾„è€ƒè™‘é›¶ç‚¹ä¿®æ­£ï¼‰
            const validPMass = experimentData.pMeasurements
                .filter(item => item && item.mass && !isNaN(parseFloat(item.mass)))
                .map(item => parseFloat(item.mass));
            
            const validPHeight = experimentData.pMeasurements
                .filter(item => item && item.height && !isNaN(parseFloat(item.height)))
                .map(item => parseFloat(item.height) - x0); // é›¶ç‚¹ä¿®æ­£
            
            const validPDiameter = experimentData.pMeasurements
                .filter(item => item && item.diameter && !isNaN(parseFloat(item.diameter)))
                .map(item => parseFloat(item.diameter) - x0); // é›¶ç‚¹ä¿®æ­£

            // è®¡ç®—æ ·å“Bçš„å¹³å‡å€¼ï¼ˆé«˜åº¦å’Œç›´å¾„è€ƒè™‘é›¶ç‚¹ä¿®æ­£ï¼‰
            const validBHeight = experimentData.bMeasurements
                .filter(item => item && item.height && !isNaN(parseFloat(item.height)))
                .map(item => parseFloat(item.height) - x0); // é›¶ç‚¹ä¿®æ­£
            
            const validBDiameter = experimentData.bMeasurements
                .filter(item => item && item.diameter && !isNaN(parseFloat(item.diameter)))
                .map(item => parseFloat(item.diameter) - x0); // é›¶ç‚¹ä¿®æ­£

            return {
                avgMass: validPMass.length > 0 ? validPMass.reduce((a, b) => a + b) / validPMass.length : 0,
                avgHeightP: validPHeight.length > 0 ? validPHeight.reduce((a, b) => a + b) / validPHeight.length : 0,
                avgDiameterP: validPDiameter.length > 0 ? validPDiameter.reduce((a, b) => a + b) / validPDiameter.length : 0,
                avgHeightB: validBHeight.length > 0 ? validBHeight.reduce((a, b) => a + b) / validBHeight.length : 0,
                avgDiameterB: validBDiameter.length > 0 ? validBDiameter.reduce((a, b) => a + b) / validBDiameter.length : 0
            };
        }

        // è®¡ç®—çƒ­å¯¼ç‡K
        function calculateThermalConductivity(averages) {
            const Cp = 389; // J/(kgÂ·K)
            const theta1 = parseFloat(experimentData.theta1);
            const theta2 = parseFloat(experimentData.theta2);
            const dthetaDt = parseFloat(experimentData.dthetaDtCalculated);
            
            const mp = averages.avgMass / 1000; // è½¬æ¢ä¸ºkg
            const hp = averages.avgHeightP / 1000; // è½¬æ¢ä¸ºm
            const dp = averages.avgDiameterP / 1000; // è½¬æ¢ä¸ºm
            const hb = averages.avgHeightB / 1000; // è½¬æ¢ä¸ºm
            const db = averages.avgDiameterB / 1000; // è½¬æ¢ä¸ºm
            
            // K = m_p * C_p * (dÎ¸/dt) * (d_p + 4h_p)/(d_p + 2h_p) * h_b/(Î¸1-Î¸2) * 2/(Ï€ * d_bÂ²)
            const term1 = mp * Cp * dthetaDt;
            const term2 = (dp + 4 * hp) / (dp + 2 * hp);
            const term3 = hb / (theta1 - theta2);
            const term4 = 2 / (Math.PI * db * db);
            
            return term1 * term2 * term3 * term4;
        }

        // è®¡ç®—ä¸ç¡®å®šåº¦
        function calculateUncertainty(averages, k) {
            const x0 = parseFloat(experimentData.x0) || 0;
            const theta1 = parseFloat(experimentData.theta1);
            const theta2 = parseFloat(experimentData.theta2);
            const deltaTheta = parseFloat(experimentData.deltaTheta);
            const deltaT = parseFloat(experimentData.deltaT);
            const uThetaDiff = parseFloat(experimentData.uThetaDiff);
            
            // è®¡ç®—å„é‡çš„Aç±»ä¸ç¡®å®šåº¦ï¼ˆæ ‡å‡†å·®ï¼‰- è€ƒè™‘é›¶ç‚¹ä¿®æ­£
            const correctedPMass = experimentData.pMeasurements
                .map(item => item ? parseFloat(item.mass || 0) : 0);
            const correctedPHeight = experimentData.pMeasurements
                .map(item => item ? parseFloat(item.height || 0) - x0 : 0);
            const correctedPDiameter = experimentData.pMeasurements
                .map(item => item ? parseFloat(item.diameter || 0) - x0 : 0);
            const correctedBHeight = experimentData.bMeasurements
                .map(item => item ? parseFloat(item.height || 0) - x0 : 0);
            const correctedBDiameter = experimentData.bMeasurements
                .map(item => item ? parseFloat(item.diameter || 0) - x0 : 0);

            const uMassA = calculateStandardDeviation(correctedPMass);
            const uHeightPA = calculateStandardDeviation(correctedPHeight);
            const uDiameterPA = calculateStandardDeviation(correctedPDiameter);
            const uHeightBA = calculateStandardDeviation(correctedBHeight);
            const uDiameterBA = calculateStandardDeviation(correctedBDiameter);

            // Bç±»ä¸ç¡®å®šåº¦ï¼ˆä»ªå™¨è¯¯å·®ï¼‰- ç¡®ä¿æ¸©åº¦ç›¸å…³å‚æ•°éƒ½é™¤ä»¥æ ¹å·ä¸‰
            const uMassB = 0.01 / Math.sqrt(3); // g
            const uHeightPB = 0.02 / Math.sqrt(3); // mm
            const uDiameterPB = 0.02 / Math.sqrt(3); // mm
            const uHeightBB = 0.02 / Math.sqrt(3); // mm
            const uDiameterBB = 0.02 / Math.sqrt(3); // mm
            const uDeltaThetaB = 0.1 / Math.sqrt(3); // Î”Î¸çš„ä»ªå™¨ä¸ç¡®å®šåº¦ 0.1â„ƒ
            const uDeltaTB = 1 / Math.sqrt(3); // Î”tçš„ä»ªå™¨ä¸ç¡®å®šåº¦ 1s
            const uThetaDiffValue = uThetaDiff / Math.sqrt(3); // (Î¸â‚-Î¸â‚‚)çš„ä»ªå™¨ä¸ç¡®å®šåº¦

            // åˆæˆä¸ç¡®å®šåº¦
            const uMassTotal = Math.sqrt(uMassA * uMassA + uMassB * uMassB);
            const uHeightPTotal = Math.sqrt(uHeightPA * uHeightPA + uHeightPB * uHeightPB);
            const uDiameterPTotal = Math.sqrt(uDiameterPA * uDiameterPA + uDiameterPB * uDiameterPB);
            const uHeightBTotal = Math.sqrt(uHeightBA * uHeightBA + uHeightBB * uHeightBB);
            const uDiameterBTotal = Math.sqrt(uDiameterBA * uDiameterBA + uDiameterBB * uDiameterBB);

            // è®¡ç®—å„åˆ†é‡çš„ç›¸å¯¹ä¸ç¡®å®šåº¦å¹³æ–¹
            
            // 1. u(m_p)/m_p
            const uMassRelative = uMassTotal / averages.avgMass;
            const term1 = Math.pow(uMassRelative, 2);
            
            // 2. u(dÎ¸/dt)/(dÎ¸/dt) = âˆš[(u(Î”Î¸)/Î”Î¸)Â² + (u(Î”t)/Î”t)Â²]
            const uDeltaThetaRelative = uDeltaThetaB / deltaTheta;
            const uDeltaTRelative = uDeltaTB / deltaT;
            const uDthetaDtRelative = Math.sqrt(
                Math.pow(uDeltaThetaRelative, 2) + 
                Math.pow(uDeltaTRelative, 2)
            );
            const term2 = Math.pow(uDthetaDtRelative, 2);
            
            // 3. å‡ ä½•å› å­é¡¹ [2h_p u(d_p)/((d_p+4h_p)(d_p+2h_p))]Â² + [2d_p u(h_p)/((d_p+4h_p)(d_p+2h_p))]Â²
            const dp = averages.avgDiameterP;
            const hp = averages.avgHeightP;
            const geometricTerm1 = 2 * hp * uDiameterPTotal / ((dp + 4 * hp) * (dp + 2 * hp));
            const geometricTerm2 = 2 * dp * uHeightPTotal / ((dp + 4 * hp) * (dp + 2 * hp));
            const uGeometricFactor = Math.sqrt(Math.pow(geometricTerm1, 2) + Math.pow(geometricTerm2, 2));
            const term3 = Math.pow(uGeometricFactor, 2);
            
            // 4. u(h_b)/h_b
            const uHeightBRelative = uHeightBTotal / averages.avgHeightB;
            const term4 = Math.pow(uHeightBRelative, 2);
            
            // 5. 2u(d_b)/d_b
            const uDiameterBRelative = 2 * uDiameterBTotal / averages.avgDiameterB;
            const term5 = Math.pow(uDiameterBRelative, 2);
            
            // 6. u(Î¸â‚-Î¸â‚‚)/(Î¸â‚-Î¸â‚‚)
            const uThetaDiffRelative = uThetaDiffValue / (theta1 - theta2);
            const term6 = Math.pow(uThetaDiffRelative, 2);

            // æ€»ç›¸å¯¹ä¸ç¡®å®šåº¦
            const relativeUncertainty = Math.sqrt(term1 + term2 + term3 + term4 + term5 + term6);
            
            // ç»å¯¹ä¸ç¡®å®šåº¦
            const uK = k * relativeUncertainty;

            return {
                uK: uK,
                relativeUncertainty: relativeUncertainty,
                // è´¨é‡ä¸ç¡®å®šåº¦
                uMassA: uMassA,
                uMassB: uMassB,
                uMassTotal: uMassTotal,
                // æ•£çƒ­ç›˜å‡ ä½•å‚æ•°ä¸ç¡®å®šåº¦
                uHeightPA: uHeightPA,
                uHeightPB: uHeightPB,
                uHeightPTotal: uHeightPTotal,
                uDiameterPA: uDiameterPA,
                uDiameterPB: uDiameterPB,
                uDiameterPTotal: uDiameterPTotal,
                // æ ·å“Bå‡ ä½•å‚æ•°ä¸ç¡®å®šåº¦
                uHeightBA: uHeightBA,
                uHeightBB: uHeightBB,
                uHeightBTotal: uHeightBTotal,
                uDiameterBA: uDiameterBA,
                uDiameterBB: uDiameterBB,
                uDiameterBTotal: uDiameterBTotal,
                // æ¸©åº¦ç›¸å…³ä¸ç¡®å®šåº¦
                uDeltaThetaB: uDeltaThetaB,
                uDeltaTB: uDeltaTB,
                uThetaDiffValue: uThetaDiffValue
            };
        }

        // è®¡ç®—æ ‡å‡†å·®
        function calculateStandardDeviation(data) {
            const validData = data.filter(val => !isNaN(val) && val !== 0);
            if (validData.length < 2) return 0;
            
            const mean = validData.reduce((a, b) => a + b) / validData.length;
            const variance = validData.reduce((sum, val) => sum + Math.pow(val - mean, 2), 0) / (validData.length - 1);
            return Math.sqrt(variance) / Math.sqrt(validData.length);
        }

        // æ˜¾ç¤ºè®¡ç®—ç»“æœ
        function displayResults() {
            // ä¸»è¦ç»“æœ
            elements.kValue.textContent = `${experimentData.kValue} W/(mÂ·K)`;
            elements.uKValue.textContent = `${experimentData.uKValue} W/(mÂ·K)`;
            elements.relativeUncertainty.textContent = experimentData.relativeUncertainty;
            
            // å¹³å‡å€¼
            elements.avgMass.textContent = `${experimentData.avgMass} Â± ${experimentData.uMassTotal} g`;
            elements.avgHeightP.textContent = `${experimentData.avgHeightP} Â± ${experimentData.uHeightPTotal} mm`;
            elements.avgDiameterP.textContent = `${experimentData.avgDiameterP} Â± ${experimentData.uDiameterPTotal} mm`;
            elements.avgHeightB.textContent = `${experimentData.avgHeightB} Â± ${experimentData.uHeightBTotal} mm`;
            elements.avgDiameterB.textContent = `${experimentData.avgDiameterB} Â± ${experimentData.uDiameterBTotal} mm`;
            
            // ä¸ç¡®å®šåº¦åˆ†é‡
            elements.uMassA.textContent = `${experimentData.uMassA} g`;
            elements.uMassB.textContent = `${experimentData.uMassB} g`;
            elements.uMassTotal.textContent = `${experimentData.uMassTotal} g`;
            elements.uHeightPA.textContent = `${experimentData.uHeightPA} mm`;
            elements.uHeightPB.textContent = `${experimentData.uHeightPB} mm`;
            elements.uHeightPTotal.textContent = `${experimentData.uHeightPTotal} mm`;
            elements.uDiameterPA.textContent = `${experimentData.uDiameterPA} mm`;
            elements.uDiameterPB.textContent = `${experimentData.uDiameterPB} mm`;
            elements.uDiameterPTotal.textContent = `${experimentData.uDiameterPTotal} mm`;
            elements.uHeightBA.textContent = `${experimentData.uHeightBA} mm`;
            elements.uHeightBB.textContent = `${experimentData.uHeightBB} mm`;
            elements.uHeightBTotal.textContent = `${experimentData.uHeightBTotal} mm`;
            elements.uDiameterBA.textContent = `${experimentData.uDiameterBA} mm`;
            elements.uDiameterBB.textContent = `${experimentData.uDiameterBB} mm`;
            elements.uDiameterBTotal.textContent = `${experimentData.uDiameterBTotal} mm`;
            
            // æ¸©åº¦ç›¸å…³ä¸ç¡®å®šåº¦ - ç¡®ä¿æ­£ç¡®æ˜¾ç¤º
            elements.uDeltaThetaB.textContent = `${experimentData.uDeltaThetaB} Â°C`;
            elements.uDeltaTB.textContent = `${experimentData.uDeltaTB} s`;
            elements.uThetaDiffValue.textContent = `${experimentData.uThetaDiffValue} Â°C`;
            
            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            elements.resultsSection.style.display = 'block';
            experimentData.showResults = true;
        }

        // ä¿å­˜æ•°æ®åˆ°localStorage
        function saveData() {
            try {
                experimentData.lastUpdate = new Date().toLocaleString();
                localStorage.setItem('experiment1-1', JSON.stringify(experimentData));
                elements.lastUpdate.textContent = experimentData.lastUpdate;
                alert('æ•°æ®ä¿å­˜æˆåŠŸï¼');
            } catch (error) {
                console.error('ä¿å­˜å¤±è´¥:', error);
                alert('ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•');
            }
        }

        // ä»localStorageåŠ è½½æ•°æ®
        function loadExperimentData() {
            try {
                const savedData = localStorage.getItem('experiment1-1');
                if (savedData) {
                    const data = JSON.parse(savedData);
                    
                    // æ¢å¤åŸºæœ¬å‚æ•°
                    elements.x0.value = data.x0 || '';
                    elements.theta1.value = data.theta1 || '';
                    elements.theta2.value = data.theta2 || '';
                    elements.deltaTheta.value = data.deltaTheta || '';
                    elements.deltaT.value = data.deltaT || '';
                    elements.uThetaDiff.value = data.uThetaDiff || '0.10';
                    
                    // æ¢å¤æµ‹é‡æ•°æ®
                    if (data.pMeasurements) {
                        data.pMeasurements.forEach((measurement, index) => {
                            if (measurement) {
                                const inputs = elements.pMeasurementsContainer.querySelectorAll(`[data-index="${index}"]`);
                                inputs.forEach(input => {
                                    const type = input.dataset.type;
                                    if (measurement[type]) {
                                        input.value = measurement[type];
                                    }
                                });
                            }
                        });
                    }
                    
                    if (data.bMeasurements) {
                        data.bMeasurements.forEach((measurement, index) => {
                            if (measurement) {
                                const inputs = elements.bMeasurementsContainer.querySelectorAll(`[data-index="${index}"]`);
                                inputs.forEach(input => {
                                    const type = input.dataset.type;
                                    if (measurement[type]) {
                                        input.value = measurement[type];
                                    }
                                });
                            }
                        });
                    }
                    
                    // æ¢å¤è®¡ç®—ç»“æœ
                    if (data.showResults) {
                        Object.assign(experimentData, data);
                        displayResults();
                    }
                    
                    // æ¢å¤æœ€åæ›´æ–°æ—¶é—´
                    if (data.lastUpdate) {
                        elements.lastUpdate.textContent = data.lastUpdate;
                    }
                    
                    // æ›´æ–°è®¡ç®—çŠ¶æ€
                    updateCalculateStatus();
                    calculateDthetaDt();
                }
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
            }
        }
    </script>
</body>
</html>